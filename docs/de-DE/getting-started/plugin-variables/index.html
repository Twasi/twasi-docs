<!DOCTYPE html><html lang="de-DE"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Variablen einem Twasi-Plugin hinzufügen · TwasiDocs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Das Hinzufügen dynamischer Variablen zu deinem Plugin ist sehr einfach! Der beste Weg, um zu erklären, wie es funktioniert, ist ein einfaches Beispiel."/><meta name="docsearch:language" content="de-DE"/><meta property="og:title" content="Variablen einem Twasi-Plugin hinzufügen · TwasiDocs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://github.com/twasi/"/><meta property="og:description" content="Das Hinzufügen dynamischer Variablen zu deinem Plugin ist sehr einfach! Der beste Weg, um zu erklären, wie es funktioniert, ist ein einfaches Beispiel."/><meta property="og:image" content="https://github.com/twasi/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://github.com/twasi/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://github.com/twasi/blog/atom.xml" title="TwasiDocs Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://github.com/twasi/blog/feed.xml" title="TwasiDocs Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/de-DE"><img class="logo" src="/img/docs-logo.svg" alt="TwasiDocs"/><h2 class="headerTitleWithLogo">TwasiDocs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/de-DE/home" target="_self">Developers</a></li><li class=""><a href="/docs/de-DE/users/home" target="_self">Users</a></li><li class=""><a href="/de-DE/changelogs" target="_self">Changelogs</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Deutsch</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/getting-started/plugin-variables">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Getting started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Welcome</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de-DE/home">Home</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Core concepts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de-DE/core-concepts/twasi-plugin">Das Twasi-Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/core-concepts/twasi-command">Der Twasi-Command</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/core-concepts/twasi-variable">Die Twasi-Variable</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de-DE/getting-started/local-setup">Lokale Installation von Twasi</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/getting-started/plugin-base">Plugin Grundlage</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/getting-started/plugin-commands">Plugin Befehle</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/getting-started/plugin-translations">Plugin Übersetzungen</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/de-DE/getting-started/plugin-variables">Plugin Variablen</a></li><li class="navListItem"><a class="navItem" href="/docs/de-DE/getting-started/plugin-permissions">Plugin Berechtigungen</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Variablen einem Twasi-Plugin hinzufügen</h1></header><article><div><span><p>Das Hinzufügen dynamischer Variablen zu deinem Plugin ist sehr einfach! Der beste Weg, um zu erklären, wie es funktioniert, ist ein einfaches Beispiel.</p>
<h2><a class="anchor" aria-hidden="true" id="erstellen-einer-variablen-controller-klasse"></a><a href="#erstellen-einer-variablen-controller-klasse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Erstellen einer Variablen Controller-Klasse</h2>
<p>Wir werden eine Variable hinzufügen, die die aktuelle Zeit zurückgibt. Wir werden auch ein Argument verwenden, um dem Benutzer die Angabe eines benutzerdefinierten Formats zu ermöglichen.</p>
<p>Lass uns beginnen, eine neue Klasse namens <em>TimeVariable</em> zu erstellen.</p>
<blockquote>
<p>Wenn du mehrere Variablen hast, ist es eine gute Praxis, sie in ein Paket namens &quot;Variablen&quot; oder ähnliches zu packen, um alles sauber zu halten.</p>
</blockquote>
<pre><code class="hljs css language-java"><span class="hljs-keyword">package</span> de.merlinw.variables;

<span class="hljs-keyword">import</span> net.twasi.core.interfaces.api.TwasiInterface;
<span class="hljs-keyword">import</span> net.twasi.core.models.Message.TwasiMessage;
<span class="hljs-keyword">import</span> net.twasi.core.plugin.api.TwasiUserPlugin;
<span class="hljs-keyword">import</span> net.twasi.core.plugin.api.TwasiVariable;

<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TimeVariable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TwasiVariable</span> </span>{

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TimeVariable</span><span class="hljs-params">(TwasiUserPlugin owner)</span> </span>{
        <span class="hljs-keyword">super</span>(owner);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">process</span><span class="hljs-params">(String name, TwasiInterface inf, String[] params, TwasiMessage message)</span> </span>{
        <span class="hljs-comment">// This function is used to resolve the variable</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getNames</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-string">"time"</span>, <span class="hljs-string">"timestamp"</span>);
    }
}
</code></pre>
<p>Es gibt zwei sehr wichtige Funktionen, die du überschreiben musst:</p>
<ul>
<li><p>Die erste ist die <em>process</em>-Funktion, die aufgerufen wird, wenn Twasi eine Nachricht mit einer Variable sendet, die aufgelöst werden muss. Der Rückgabetyp ist ein String. Twasi wird die Variable durch das ersetzen, was du hier zurückgibst. Es hat vier Parameter:</p>
<ul>
<li>'String name' ist der verwendete Variablenname (da Variablen mehrere Namen/Aliase haben können).</li>
<li>'TwasiInterface inf' ist die TwasiInterface des Benutzers, in dessen Kanal die Variable verwendet wird.</li>
<li>'String[] params' enthält alle Argumente/Parameter, die am Ende des Variablennames in den Klammern angegeben wurden (wird leer sein, wenn es überhaupt keine Klammern gibt).</li>
<li>'TwasiMessage message' ist die TwasiMessage, auf die wir derzeit antworten.</li>
</ul></li>
<li><p>Die zweite ist die <em>getNames</em>-Funktion, die jeden Namen zurückgibt, den die Variable haben sollte. Der erste String in der Ausgabeliste ist der Hauptname deiner Variable, der in Variablenlisten angezeigt wird. Alle anderen Strings sind Aliase, die ebenfalls verwendet werden können, aber nicht aufgelistet werden.</p></li>
</ul>
<p>Nun wollen wir unserer <em>process</em>-Funktion etwas Logik hinzufügen:</p>
<pre><code class="hljs css language-java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">process</span><span class="hljs-params">(String name, TwasiInterface inf, String[] params, TwasiMessage message)</span> </span>{
        SimpleDateFormat hourFormat = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"HH:mm"</span>);
        <span class="hljs-keyword">return</span> hourFormat.format(Calendar.getInstance().getTime());
    }
</code></pre>
<p>Jetzt gibt unsere Variable die aktuelle Zeit zurück. Fügen wir einen Parameter hinzu:</p>
<pre><code class="hljs css language-java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">process</span><span class="hljs-params">(String name, TwasiInterface inf, String[] params, TwasiMessage message)</span> </span>{
        String format = (params.length &gt; <span class="hljs-number">0</span> ? params[<span class="hljs-number">0</span>] : <span class="hljs-string">"HH:mm"</span>);
        SimpleDateFormat hourFormat = <span class="hljs-keyword">new</span> SimpleDateFormat(format);
        <span class="hljs-keyword">return</span> hourFormat.format(Calendar.getInstance().getTime());
    }
</code></pre>
<p>Wenn ein Parameter angegeben ist, wird der Datumsparser ihn anstelle von 'HH:mm' verwenden.</p>
<h2><a class="anchor" aria-hidden="true" id="fehlerbehandlung"></a><a href="#fehlerbehandlung" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fehlerbehandlung</h2>
<p>In den meisten Fällen musst du dich nicht um Fehlerbehandlung kümmern. Wenn deine <em>process</em>-Funktion eine Ausnahme erzeugt, löst Twasi die Variable automatisch mit 'ERROR' auf. Wenn die Ausnahme eine <em>ArrayIndexOutOfBoundsException</em> ist, wird Twasi 'INSUFFICIENT_PARAMETERS' zurückgeben.</p>
<p>Natürlich kannst du eine benutzerdefinierte Fehlerbehandlung implementieren, um nützlichere Fehlermeldungen zu erhalten:</p>
<pre><code class="hljs css language-java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">process</span><span class="hljs-params">(String name, TwasiInterface inf, String[] params, TwasiMessage message)</span> </span>{
        String format = (params.length &gt; <span class="hljs-number">0</span> ? params[<span class="hljs-number">0</span>] : <span class="hljs-string">"HH:mm"</span>);
        SimpleDateFormat hourFormat = <span class="hljs-keyword">new</span> SimpleDateFormat(format);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> hourFormat.format(Calendar.getInstance().getTime());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"INVALID_FORMAT"</span>;
        }
    }
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="registrieren-von-variablen"></a><a href="#registrieren-von-variablen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registrieren von Variablen</h2>
<p>Der letzte Schritt ist es, den Variablenkontroller - wie die Befehle in der <em>TwasiUserPlugin</em>-Klasse deines Plugins - zu registrieren:</p>
<pre><code class="hljs css language-java">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ExampleUserPlugin</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// Register commands</span>
        registerCommand(ExampleCommand.class);
        registerCommand(ExampleStructuredCommand.class);

        <span class="hljs-comment">// Register variables</span>
        registerVariable(TimeVariable.class);
    }
</code></pre>
<p>Wenn Sie die Signatur deines Variable-Controller-Klassen-Konstruktors geändert hast, wirft die obige Syntax einen Fehler auf. Du kannst diese Syntax stattdessen verwenden:</p>
<pre><code class="hljs css language-java">    registerVariable(<span class="hljs-keyword">new</span> TimeVariable(<span class="hljs-keyword">this</span>, otherParameters));
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fortfahren"></a><a href="#fortfahren" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fortfahren</h2>
<p>Im <a href="/docs/getting-started/plugin-permissions">nächsten Teil</a> der &quot;Getting started&quot; Serie erfährst du, wie du Berechtigungen in deinem Plugin verwenden kannst!</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/de-DE/getting-started/plugin-translations"><span class="arrow-prev">← </span><span>Plugin Übersetzungen</span></a><a class="docs-next button" href="/docs/de-DE/getting-started/plugin-permissions"><span>Plugin Berechtigungen</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#erstellen-einer-variablen-controller-klasse">Erstellen einer Variablen Controller-Klasse</a></li><li><a href="#fehlerbehandlung">Fehlerbehandlung</a></li><li><a href="#registrieren-von-variablen">Registrieren von Variablen</a></li><li><a href="#fortfahren">Fortfahren</a></li></ul></nav></div><footer style="background:#1a2035;color:#afb6c5" class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo_small.png" alt="TwasiDocs" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/de-DE/users/home.html">User Documentation</a><a href="/docs/de-DE/home.html">Developer Documentation</a><a href="/docs/de-DE/doc3.html">API Reference</a></div><div><h5>Community</h5><a href="https://discord.gg/sQyhWrG">Discord</a><a href="https://twitter.com/twasinet" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/twasi" target="_blank">GitHub</a></div><div><h5>Legals</h5><a href="/blog">Privacy</a><a href="/blog">Terms of Use</a><a href="/blog">Imprint</a></div></section><section class="copyright">Copyright © 2019 Twasi | Twasi.NET | Docs.Twasi.NET</section></footer></div></body></html>